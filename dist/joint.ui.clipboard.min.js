/*! Rappid v3.1.1 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2015 client IO

 2020-03-01 


This Source Code Form is subject to the terms of the Rappid Trial License
, v. 2.0. If a copy of the Rappid License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(t,e,r){"use strict";var i=(e=e&&e.hasOwnProperty("default")?e.default:e).Collection.extend({LOCAL_STORAGE_KEY:"joint.ui.Clipboard.cells",defaults:{useLocalStorage:!0},copyElements:function(t,e,i){this.options=r.util.assign({},this.defaults,i),i=this.options;var s=t.toArray(),a=r.util.sortBy(e.cloneSubgraph(s,i),function(t){return t.isLink()?2:1});return this.reset(a),i.useLocalStorage&&window.localStorage&&localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(this.toJSON())),s},cutElements:function(t,e,i){var s=this.copyElements(t,e,i);return e.trigger("batch:start",{batchName:"cut"}),r.util.invoke(s,"remove"),e.trigger("batch:stop",{batchName:"cut"}),s},pasteCells:function(t,e){if((e=r.util.defaults(e||{},this.options)).useLocalStorage&&window.localStorage){var i=JSON.parse(localStorage.getItem(this.LOCAL_STORAGE_KEY));if(i){var s={cells:i},a=t.get("cells").cellNamespace,o=new r.dia.Graph([],{cellNamespace:a}).fromJSON(s,{sort:!1,dry:!0});this.reset(o.getCells())}}var l=this.map(function(t){return this.modifyCell(t,e)}.bind(this));return t.trigger("batch:start",{batchName:"paste"}),t.addCells(l),t.trigger("batch:stop",{batchName:"paste"}),this.copyElements(this,t),l},clear:function(){this.options={},this.reset([]),window.localStorage&&localStorage.removeItem(this.LOCAL_STORAGE_KEY)},modifyCell:function(t,e){return t.unset("z"),t.isLink()&&e.link&&t.set(e.link),e.translate&&t.translate(e.translate.dx||20,e.translate.dy||20),t.collection=null,t}});t.Clipboard=i}(this.joint.ui=this.joint.ui||{},Backbone,joint);